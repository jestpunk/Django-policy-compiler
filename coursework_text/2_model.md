# Модели доступа. ChRelBAС.

В данной главе мы обзорно опишем некоторые модели доступа, лежащие в них объекты и протоколы, по которым они взаимодействуют. Основное внимание здесь умышленно уделено модели ChRelBAC — ведь именно её мы реализуем в ходе работы.

&nbsp;

### RBAC

Разграничение доступа на основе ролей (RBAC)[3] — модель, внутри которой каждому объекту присваиваются роли. Именно на их основе и выдаются права доступа к тем или иным объектам. Проблема этого подхода проявляется, когда правила углубляются и становятся вложенными (внутри одного правила может быть масса доуточняющих правил). В этом случае в качестве роли придется использовать уже всевозможные комбинации различных параметров. 

Например, если на разграничение прав влияют профессия и страна проживания человека, в рамках модели RBAC нам придется вводить роли "Бухгалтер Россия", "Аналитик Турция" и прочие, что неоправданно раздувает модель, лишает её ясности. С помощью этой модели невозможно работать с правилами, задействующими заранее не известные атрибуты, а также с правилами, которые ограничивают доступ не к действиям, а к данным. Конечно, все вышеописанные проблемы на практике можно обойти, но это будет трудоёмкий процесс, делающий разработку дорогой и громоздкой.

&nbsp;


### ABAC
Разграничение доступа на основе атрибутов (ABAC)[2] — это модель доступа, основанная на анализе правил для атрибутов объектов или субъектов, возможных операций с ними и окружения, соответствующего запросу. Она решает многие проблемы модели RBAC. Основное отличии ABAC от RBAC состоит в том, что каждая ситуация оценивается не с точки зрения ролей пользователя и ресурса, а с точки зрения атрибутов, которые к ним относятся. По сути накладывается фильтр на различные поля моделей данных. 

Помимо присутствующих во множестве моделей *объекта*, *субъекта* и *действия*, в модели ABAC необходимо так же задать *окружение*, контекст операции.  Окружение может включать в себя геолокацию объекта, временной промежуток операции и любую другую полезную метаинформацию. 

Таким образом, эта модель является гораздо более гибким аналогом RBAC. Она решает все проблемы, описанные для RBAC, часть фильтров можно вычислять еще до обращения к ресурсу, оптимизируя запрос.

&nbsp;

### XACML

XACML (extensible access control markup language) является стандартом для модели ABAC. 
С точки зрения этого стандарта любое правило состоит из нескольких величин 

- объект (то, к чему запрашивается доступ)
- эффект
- условие (набор сложных фильтров и выражений)
- обязательства
- рекомендации

Правило может быть как разрешающим, так и запрещающим. Для этого в правило добавляется величина "эффект". Она и хранит булеву величину, отвечающую за вид правила. Обязательства и рекомендации отличаются между собой исключительно с точки зрения необходимости их выполнения. 

Политика, согласно этому стандарту, также состоит из нескольких полей

- цель
- правило
- алгоритм комбинации правил
- обязательства
- рекомендации

Алгоритм комбинации правил отвечает за то, по какому принципу мы проверяем каждое отдельное правило и принимаем решение о применении эффекта. Например, самым популярным алгоритмом является "запрещено, если не разрешено", который проходит по всем разрешающим правилам и разрешает доступ только при выполнении одного из них.

&nbsp;

### ChRelBAC

Наконец, рассмотрим модель доступа на основе цепочных взаимодействий (chain relation based access model, ChRelBAC)[1], ведь именно на её основе и реализован проект. Данная модель состоит из следующих объектов:

- $Objects$ — абстрактное множество объектов системы. Это могут быть пользователи, дипломы, статьи и так далее.
- $Users \subset Objects$ — подмножество объектов, которое мы считаем пользователями, то есть авторами действий
- $Classes$ — множество классов, которые присваиваются объектам
- $Actions$ — множество действий, которые может выполнять пользователь
- $Relations$ — множество отношений между двумя объектами
- $Primitive\;relations \subset Relations$ — базовые отношения, на основе которых строятся все остальные
- $Induced\;relations = Relations / Primitive\;relations$ — порожденные отношения
- $Chains$ — цепочки взаимодействий

В модели ChRelBAC вводится понятие цепочки. По сути это последовательность отношений, по цепочке связывающая объекты системы. Иными словами, если считать объекты вершинами некоторого графа системы, а отношения рёбрами, то цепочка есть путь в графе.

Согласно этой модели, действие разрешено если и только если между двумя объектами проходит цепочка отношений, разрешающая данная действие, и не проходит ни одной цепочки, запрещающей это действие. Поэтому реализация компилятора политик для этой модели сводится к последовательному перебору различных правил с учётом их метки. Ньюансам программной реализации посвящены следующие главы текущей работы.
